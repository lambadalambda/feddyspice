# feddyspice local development defaults
#
# mise loads this file automatically when running tasks.

# Public-facing domain/scheme used to generate ActivityPub URLs
FEDDYSPICE_DOMAIN=localhost
FEDDYSPICE_SCHEME=http

# Bind address for the HTTP server
FEDDYSPICE_LISTEN=0.0.0.0:8080

# SQLite database path (ignored by git via *.sqlite3)
FEDDYSPICE_DB_PATH=./feddyspice.sqlite3

# Optional custom CA bundle (useful for fedbox-like internal TLS)
FEDDYSPICE_CACERTFILE=

# Allow outbound fetches to private/loopback ranges (needed for fedbox / local multi-server dev).
# WARNING: keep this disabled in production.
FEDDYSPICE_ALLOW_PRIVATE_NETWORKS=false

# Outbound HTTP timeout (milliseconds)
FEDDYSPICE_HTTP_TIMEOUT_MS=10000

# Outbound HTTP maximum response body size (bytes). Use 0 to disable.
FEDDYSPICE_HTTP_MAX_BODY_BYTES=1048576

# Outbound HTTP: allow explicit nonstandard ports (e.g. https://example.com:8443/).
# WARNING: leaving this off reduces SSRF blast radius.
FEDDYSPICE_HTTP_ALLOW_NONSTANDARD_PORTS=false

# Outbound HTTP: per-host fetch storm protection.
FEDDYSPICE_HTTP_MAX_INFLIGHT_PER_HOST=4
FEDDYSPICE_HTTP_FAILURE_BACKOFF_BASE_MS=1000
FEDDYSPICE_HTTP_FAILURE_BACKOFF_MAX_MS=60000

# Maximum JSON nesting depth accepted for request bodies (DoS hardening).
FEDDYSPICE_JSON_MAX_NESTING_DEPTH=64

# Inbound ActivityPub signature freshness window (seconds).
# Reject inbox deliveries whose HTTP `Date` header is too far from local time.
FEDDYSPICE_SIGNATURE_MAX_CLOCK_SKEW_SEC=900

# Logging
FEDDYSPICE_LOG_FILE=./feddyspice.log
FEDDYSPICE_LOG_LEVEL=info

# Background job execution mode (spawn|sync|disabled)
FEDDYSPICE_JOBS_MODE=spawn

# Zig: keep global cache inside the repo (avoids writing to ~/.cache/zig)
ZIG_GLOBAL_CACHE_DIR=.zig-global-cache

# Fedbox: override if Docker can't allocate the default subnet
FEDBOX_SUBNET=10.77.0.0/16
